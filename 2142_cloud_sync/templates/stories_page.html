<!DOCTYPE html>
<html lang="{% if current_lang == 'ar' %}ar{% else %}en{% endif %}" dir="{% if current_lang == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if current_lang == 'ar' %}قصص النجاح - Elegant{% else %}Success Stories - Elegant{% endif %}</title>
    <link href="{{ url_for('static', filename='tooplate-cloud-sync-style.css') }}" rel="stylesheet">
    <style>
        .stories-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8rem 0 5rem 0;
            text-align: center;
            margin-bottom: 4rem;
        }
        .stories-hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .stories-hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            padding: 2rem 0;
        }
        .story-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .story-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }
        .story-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .story-content {
            padding: 2rem;
        }
        .story-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        .story-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #6c757d;
        }
        .story-author {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .story-summary {
            color: #495057;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        .read-more-btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .read-more-btn:hover {
            transform: translateX({% if current_lang == 'ar' %}5px{% else %}-5px{% endif %});
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            color: white;
        }
        .empty-state {
            text-align: center;
            padding: 5rem 2rem;
            color: #6c757d;
        }
        .empty-state i {
            font-size: 5rem;
            margin-bottom: 2rem;
            color: #dee2e6;
        }
        .empty-state h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Floating Shapes Background -->
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="Elegant Logo" class="logo-img">
                <span style="font-weight: 700; letter-spacing: 2px;">ELEGANT</span>
            </div>
            <div class="nav-links">
                {% set nav_home = sections|selectattr('section_key', 'equalto', 'nav_home')|first %}
                {% set nav_services = sections|selectattr('section_key', 'equalto', 'nav_services')|first %}
                {% set nav_about = sections|selectattr('section_key', 'equalto', 'nav_about')|first %}
                {% set nav_stories = sections|selectattr('section_key', 'equalto', 'nav_stories')|first %}
                {% set nav_contact = sections|selectattr('section_key', 'equalto', 'nav_contact')|first %}
                {% set nav_dashboard = sections|selectattr('section_key', 'equalto', 'nav_dashboard')|first %}
                
                <a href="{{ url_for('index') }}">
                    {% if current_lang == 'ar' %}
                        {{ nav_home.title_ar if nav_home and nav_home.title_ar else 'الرئيسية' }}
                    {% else %}
                        {{ nav_home.title_en if nav_home and nav_home.title_en else 'Home' }}
                    {% endif %}
                </a>
                <a href="{{ url_for('index') }}#services">
                    {% if current_lang == 'ar' %}
                        {{ nav_services.title_ar if nav_services and nav_services.title_ar else 'الخدمات' }}
                    {% else %}
                        {{ nav_services.title_en if nav_services and nav_services.title_en else 'Services' }}
                    {% endif %}
                </a>
                <a href="{{ url_for('about') }}">
                    {% if current_lang == 'ar' %}
                        {{ nav_about.title_ar if nav_about and nav_about.title_ar else 'من نحن' }}
                    {% else %}
                        {{ nav_about.title_en if nav_about and nav_about.title_en else 'About Us' }}
                    {% endif %}
                </a>
                <a href="{{ url_for('stories_page') }}" style="color: #667eea;">
                    {% if current_lang == 'ar' %}
                        {{ nav_stories.title_ar if nav_stories and nav_stories.title_ar else 'القصص' }}
                    {% else %}
                        {{ nav_stories.title_en if nav_stories and nav_stories.title_en else 'Stories' }}
                    {% endif %}
                </a>
                <a href="{{ url_for('index') }}#contact">
                    {% if current_lang == 'ar' %}
                        {{ nav_contact.title_ar if nav_contact and nav_contact.title_ar else 'تواصل معنا' }}
                    {% else %}
                        {{ nav_contact.title_en if nav_contact and nav_contact.title_en else 'Contact' }}
                    {% endif %}
                </a>
                <a href="{{ url_for('dashboard') }}" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0.5rem 1rem; border-radius: 20px;">
                    {% if current_lang == 'ar' %}
                        {{ nav_dashboard.title_ar if nav_dashboard and nav_dashboard.title_ar else 'لوحة التحكم' }}
                    {% else %}
                        {{ nav_dashboard.title_en if nav_dashboard and nav_dashboard.title_en else 'Dashboard' }}
                    {% endif %}
                </a>
                
                <!-- Language Switcher -->
                <div class="language-switcher" style="position: relative; display: inline-block;">
                    <button class="lang-btn" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 20px; padding: 0.5rem 1rem; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                        {% if current_lang == 'ar' %}العربية{% else %}English{% endif %} 🌐
                    </button>
                    <div class="lang-dropdown" style="position: absolute; top: 100%; right: 0; background: white; border: 1px solid #e9ecef; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); min-width: 120px; z-index: 1000; display: none;">
                        {% for lang_code, lang_name in languages.items() %}
                        <a href="{{ url_for('set_language_route', lang=lang_code) }}" 
                           class="lang-option{% if current_lang == lang_code %} active{% endif %}"
                           style="display: block; padding: 0.75rem 1rem; text-decoration: none; color: #2c3e50; transition: all 0.3s ease;"
                           onmouseover="this.style.background='#f8f9fa'" 
                           onmouseout="this.style.background='{% if current_lang == lang_code %}#f8f9fa{% else %}white{% endif %}'">
                            {{ lang_name }}
                        </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="stories-hero">
        <div class="container">
            <h1>
                {% if current_lang == 'ar' %}قصص نجاح عملائنا{% else %}Our Success Stories{% endif %}
            </h1>
            <p>
                {% if current_lang == 'ar' %}
                    اكتشف كيف ساعدنا عملاءنا في تحقيق أحلامهم
                {% else %}
                    Discover how we helped our clients achieve their dreams
                {% endif %}
            </p>
        </div>
    </section>

    <!-- Stories Grid -->
    <section class="container" style="padding-bottom: 5rem;">
        {% if stories %}
            <div class="stories-grid">
                {% for story in stories %}
                <div class="story-card">
                    {% if story.image_url %}
                        <img src="{{ story.image_url }}" alt="{{ story.title_ar if current_lang == 'ar' else story.title_en }}" class="story-image">
                    {% else %}
                        <div class="story-image" style="display: flex; align-items: center; justify-content: center; font-size: 4rem; color: white;">
                            <i class="fas fa-book-open"></i>
                        </div>
                    {% endif %}
                    
                    <div class="story-content">
                        <h3 class="story-title">
                            {% if current_lang == 'ar' %}
                                {{ story.title_ar or story.title_en }}
                            {% else %}
                                {{ story.title_en or story.title_ar }}
                            {% endif %}
                        </h3>
                        
                        <div class="story-meta">
                            {% if story.author_name_ar or story.author_name_en %}
                                <div class="story-author">
                                    <i class="fas fa-user"></i>
                                    <span>
                                        {% if current_lang == 'ar' %}
                                            {{ story.author_name_ar or story.author_name_en }}
                                        {% else %}
                                            {{ story.author_name_en or story.author_name_ar }}
                                        {% endif %}
                                    </span>
                                </div>
                            {% endif %}
                            {% if story.story_date %}
                                <div>
                                    <i class="fas fa-calendar"></i>
                                    <span>{{ story.story_date }}</span>
                                </div>
                            {% endif %}
                        </div>
                        
                        <p class="story-summary">
                            {% if current_lang == 'ar' %}
                                {{ (story.summary_ar or story.content_ar or '')[:200] }}
                                {% if (story.summary_ar or story.content_ar or '')|length > 200 %}...{% endif %}
                            {% else %}
                                {{ (story.summary_en or story.content_en or '')[:200] }}
                                {% if (story.summary_en or story.content_en or '')|length > 200 %}...{% endif %}
                            {% endif %}
                        </p>
                        
                        <a href="{{ url_for('view_story', story_id=story.id) }}" class="read-more-btn">
                            {% if current_lang == 'ar' %}
                                اقرأ القصة كاملة <i class="fas fa-arrow-left"></i>
                            {% else %}
                                Read Full Story <i class="fas fa-arrow-right"></i>
                            {% endif %}
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <i class="fas fa-book-open"></i>
                <h2>
                    {% if current_lang == 'ar' %}لا توجد قصص بعد{% else %}No stories yet{% endif %}
                </h2>
                <p>
                    {% if current_lang == 'ar' %}
                        سنضيف قريباً قصص نجاح عملائنا الملهمة
                    {% else %}
                        We will soon add our inspiring customer success stories
                    {% endif %}
                </p>
            </div>
        {% endif %}
    </section>

    <script src="{{ url_for('static', filename='tooplate-cloud-scripts.js') }}"></script>
    <script>
        // Language switcher functionality
        document.addEventListener('DOMContentLoaded', function() {
            const langBtn = document.querySelector('.lang-btn');
            const langDropdown = document.querySelector('.lang-dropdown');
            
            if (langBtn && langDropdown) {
                langBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    langDropdown.style.display = langDropdown.style.display === 'block' ? 'none' : 'block';
                });
                
                document.addEventListener('click', function() {
                    langDropdown.style.display = 'none';
                });
                
                langDropdown.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        });
    </script>
</body>
</html>

